(function(e){function t(t){for(var o,a,i=t[0],s=t[1],u=t[2],d=0,l=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&l.push(c[a][0]),c[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);p&&p(t);while(l.length)l.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,a=1;a<n.length;a++){var i=n[a];0!==c[i]&&(o=!1)}o&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},a={app:0},c={app:0},r=[];function i(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-0f4200d9":"316fe5cc","chunk-2df781ca":"0d80f662","chunk-30b4ad90":"e297f424","chunk-04171070":"19b3bc12","chunk-4b27ca0c":"f2a309a3","chunk-5b32b9d2":"660d7309","chunk-004c5341":"421cbec0","chunk-18e6b04a":"2af39482","chunk-3a8c232e":"4c4ac7f1","chunk-085096a7":"a41e32a3","chunk-62b12ec2":"369b9c68","chunk-49e697cc":"c5eb2155","chunk-6071ecd4":"59738f1c"}[e]+".js"}function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-0f4200d9":1,"chunk-2df781ca":1,"chunk-30b4ad90":1,"chunk-04171070":1,"chunk-4b27ca0c":1,"chunk-5b32b9d2":1,"chunk-004c5341":1,"chunk-18e6b04a":1,"chunk-3a8c232e":1,"chunk-085096a7":1,"chunk-62b12ec2":1,"chunk-49e697cc":1,"chunk-6071ecd4":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var o="css/"+({}[e]||e)+"."+{"chunk-0f4200d9":"45b47e03","chunk-2df781ca":"828bd3a2","chunk-30b4ad90":"2ff38015","chunk-04171070":"5e489f5b","chunk-4b27ca0c":"901eb98d","chunk-5b32b9d2":"044876e2","chunk-004c5341":"aedf0360","chunk-18e6b04a":"ea374e60","chunk-3a8c232e":"371d91bb","chunk-085096a7":"352cfe7a","chunk-62b12ec2":"b163d35b","chunk-49e697cc":"a3128169","chunk-6071ecd4":"3b3ce32b"}[e]+".css",c=s.p+o,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var u=r[i],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===o||d===c))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){u=l[i],d=u.getAttribute("data-href");if(d===o||d===c)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var o=t&&t.target&&t.target.src||c,r=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=o,delete a[e],p.parentNode.removeChild(p),n(r)},p.href=c;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){a[e]=0})));var o=c[e];if(0!==o)if(o)t.push(o[2]);else{var r=new Promise((function(t,n){o=c[e]=[t,n]}));t.push(o[2]=r);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=i(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(p);var n=c[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",l.name="ChunkLoadError",l.type=o,l.request=a,n[1](l)}c[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var p=d;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),a=(n("b0c0"),{class:"memberInformation"}),c={class:"name"},r={class:"linkGroup"},i=Object(o["h"])("統計"),s=Object(o["h"])("類別"),u=Object(o["h"])("帳號");function d(e,t,n,d,l,p){var m=Object(o["A"])("router-link"),h=Object(o["A"])("router-view");return Object(o["t"])(),Object(o["f"])(o["a"],null,[Object(o["g"])("div",{id:"nav",class:Object(o["o"])(["nav",{open:l.navStatus}]),onClick:t[1]||(t[1]=function(){return p.toggleNav&&p.toggleNav.apply(p,arguments)})},[Object(o["g"])("div",{class:"content",onClick:t[0]||(t[0]=Object(o["L"])((function(){}),["stop"]))},[Object(o["g"])("div",a,[Object(o["g"])("div",{class:"photo",style:Object(o["p"])({"background-image":"url("+p.storeAccount.photo+")"})},null,4),Object(o["g"])("div",c,Object(o["D"])(p.storeAccount.name),1)]),Object(o["g"])("div",r,[Object(o["i"])(m,{onClick:p.toggleNav,class:"link",to:"/statistics"},{default:Object(o["J"])((function(){return[i]})),_:1},8,["onClick"]),Object(o["i"])(m,{onClick:p.toggleNav,class:"link",to:"/settingClass"},{default:Object(o["J"])((function(){return[s]})),_:1},8,["onClick"]),Object(o["i"])(m,{onClick:p.toggleNav,class:"link",to:"/account"},{default:Object(o["J"])((function(){return[u]})),_:1},8,["onClick"])])])],2),Object(o["i"])(h,{onLogin:p.getAccount,onOpenNav:p.toggleNav},null,8,["onLogin","onOpenNav"])],64)}var l={data:function(){return{name:"",photo:"",navStatus:!1}},created:function(){localStorage.getItem("email")&&localStorage.getItem("loginCodeName")&&this.getAccount()},computed:{storeAccount:function(){return this.$store.state.account}},methods:{getAccount:function(){var e=this,t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var n=JSON.parse(t.response);null!==n&&(e.$store.commit("reloadAccount",{name:n.name,email:n.email,photo:n.photo.length>0?"/photo/"+n.photo:""}),e.$store.commit("initStore"))}},t.open("post","/api/getAccount",!1),t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify({email:localStorage.getItem("email"),loginCodeName:localStorage.getItem("loginCodeName")}))},toggleNav:function(){this.navStatus=!this.navStatus}}};n("d76e");l.render=d;var p=l,m=n("a18c"),h=(n("99af"),n("4e82"),n("4de4"),n("159b"),n("c740"),n("a434"),n("a4d3"),n("e01a"),n("5502")),f=Object(h["a"])({state:{classList:{income:[],cost:[]},recordList:[],selectMonth:{year:0,month:0},account:{name:"",email:"",photo:""}},getters:{allClass:function(e){var t=e.classList;return t.income.concat(t.cost)}},mutations:{resetName:function(e,t){e.account.name=t},resetEmail:function(e,t){e.account.email=t},resetPhoto:function(e,t){e.account.photo=t},reloadAccount:function(e,t){e.account.name=t.name,e.account.email=t.email,e.account.photo=t.photo},resetClassOrder:function(e,t){var n=t.itemIndex+(t.directionIsTop?-1:1),o=e.classList[t.isIncome?"income":"cost"],a=[o[n].order,o[t.itemIndex].order];o[t.itemIndex].order=a[0],o[n].order=a[1];var c=[o[n],o[t.itemIndex]];o[t.itemIndex]=c[0],o[n]=c[1];var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&200===r.status&&JSON.parse(r.response).isSuccess},r.open("post","/api/updateClass",!1),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify({email:localStorage.getItem("email"),loginCodeName:localStorage.getItem("loginCodeName"),targetClass:{order:o[n].order,_id:o[n]._id},siblingClass:{order:o[t.itemIndex].order,_id:o[t.itemIndex]._id}}))},reloadClass:function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var n=JSON.parse(t.response);e.classList.income=n.filter((function(e){return e.typeIsIncome})).sort((function(e,t){return e.order>t.order?1:-1})),e.classList.cost=n.filter((function(e){return!e.typeIsIncome})).sort((function(e,t){return e.order>t.order?1:-1}))}},t.open("post","/api/readClass",!1),t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify({email:localStorage.getItem("email"),loginCodeName:localStorage.getItem("loginCodeName")}))},initStore:function(e,t){var n=new Date;e.selectMonth.year=n.getFullYear(),e.selectMonth.month=n.getMonth()+1;var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState&&200===o.status){var t=JSON.parse(o.response);t.classList.forEach((function(t){e.classList[t.typeIsIncome?"income":"cost"].push(t)})),e.classList.income=e.classList.income.sort((function(e,t){return e.order>t.order?1:-1})),e.classList.cost=e.classList.cost.sort((function(e,t){return e.order>t.order?1:-1})),e.recordList=t.recordList,e.account.name=t.name,e.account.email=t.email,e.account.photo=t.photo.length>0?"/photo/"+t.photo:""}},o.open("post","/api/initStore",!1),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify({email:localStorage.getItem("email"),loginCodeName:localStorage.getItem("loginCodeName"),year:e.selectMonth.year,month:e.selectMonth.month}))},selectMonth:function(e,t){e.selectMonth.year=t.year,e.selectMonth.month=t.month,this.commit("reloadRecord")},reloadRecord:function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&200===t.status&&(e.recordList=JSON.parse(t.response).record)},t.open("post","/api/readRecord_aMonth",!1),t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify({email:localStorage.getItem("email"),loginCodeName:localStorage.getItem("loginCodeName"),year:e.selectMonth.year,month:e.selectMonth.month}))},deleteRecord:function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState&&200===n.status&&JSON.parse(n.response).isSuccess){var o=e.recordList.findIndex((function(e){return e._id==t}));e.recordList.splice(o,1)}},n.open("post","/api/deleteRecord",!1),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify({email:localStorage.getItem("email"),loginCodeName:localStorage.getItem("loginCodeName"),recordId:t}))},updateRecord:function(e,t){t.email=localStorage.getItem("email"),t.loginCodeName=localStorage.getItem("loginCodeName");var n=this,o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState&&200===o.status){o.response;if(t.year==e.selectMonth.year&&t.month==e.selectMonth.month)if(t.isNew)n.commit("reloadRecord");else{var a=e.recordList.findIndex((function(e){return e._id==t.recordId}));e.recordList[a].typeIsIncome=t.typeIsIncome,e.recordList[a].description=t.description,e.recordList[a].classId=t.classId,e.recordList[a].value=t.value,e.recordList[a].year=t.year,e.recordList[a].month=t.month,e.recordList[a].day=t.day,e.recordList[a].timestamp=t.timestamp}}},o.open("post","/api/"+(t.isNew?"createRecord":"updateRecord"),!1),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(t))}},actions:{},modules:{}}),g=Object(o["c"])(p);g.directive("clickStyle",{mounted:function(e){e.classList.add("clickStyle"),e.addEventListener("mousedown",(function(){e.classList.add("mousedown"),event.stopPropagation()})),e.addEventListener("touchstart",(function(){e.classList.add("mousedown"),event.stopPropagation()})),e.addEventListener("mouseup",(function(){e.classList.remove("mousedown"),event.stopPropagation()})),e.addEventListener("touchend",(function(){e.classList.remove("mousedown"),event.stopPropagation()})),e.addEventListener("click",(function(){event.stopPropagation()}))},updated:function(e){e.classList.add("clickStyle"),e.addEventListener("mousedown",(function(){event.stopPropagation()})),e.addEventListener("touchstart",(function(){event.stopPropagation()})),e.addEventListener("mouseup",(function(){event.stopPropagation()})),e.addEventListener("touchend",(function(){event.stopPropagation()})),e.addEventListener("click",(function(){event.stopPropagation()}))}}),g.directive("stopPropagation",{mounted:function(e){e.addEventListener("mousedown",(function(){event.stopPropagation()})),e.addEventListener("touchstart",(function(){event.stopPropagation()})),e.addEventListener("mouseup",(function(){event.stopPropagation()})),e.addEventListener("touchend",(function(){event.stopPropagation()})),e.addEventListener("click",(function(){event.stopPropagation()}))}}),g.use(f).use(m["a"]).mount("#app")},a18c:function(e,t,n){"use strict";n("d3b7"),n("3ca3"),n("ddb0");var o=n("6c02"),a=Object(o["a"])({history:Object(o["b"])("/"),routes:[{path:"/",name:"index",component:function(){return Promise.all([n.e("chunk-30b4ad90"),n.e("chunk-04171070")]).then(n.bind(null,"9f44"))}},{path:"/statistics",name:"statistics",component:function(){return Promise.all([n.e("chunk-5b32b9d2"),n.e("chunk-30b4ad90"),n.e("chunk-18e6b04a")]).then(n.bind(null,"f37f"))}},{path:"/classDetail",name:"classDetail",component:function(){return n.e("chunk-2df781ca").then(n.bind(null,"52d0"))}},{path:"/recordDetail",name:"recordDetail",component:function(){return Promise.all([n.e("chunk-5b32b9d2"),n.e("chunk-3a8c232e"),n.e("chunk-085096a7")]).then(n.bind(null,"ed83"))}},{path:"/addRecord",name:"addRecord",component:function(){return Promise.all([n.e("chunk-5b32b9d2"),n.e("chunk-6071ecd4")]).then(n.bind(null,"8201"))}},{path:"/account",name:"account",component:function(){return Promise.all([n.e("chunk-5b32b9d2"),n.e("chunk-3a8c232e"),n.e("chunk-62b12ec2")]).then(n.bind(null,"8bd5"))}},{path:"/addClass",name:"addClass",component:function(){return Promise.all([n.e("chunk-5b32b9d2"),n.e("chunk-004c5341")]).then(n.bind(null,"8d46"))}},{path:"/login",name:"login",component:function(){return n.e("chunk-0f4200d9").then(n.bind(null,"7e45"))}},{path:"/signUp",name:"signUp",component:function(){return n.e("chunk-4b27ca0c").then(n.bind(null,"161c"))}},{path:"/settingClass",name:"settingClass",component:function(){return Promise.all([n.e("chunk-5b32b9d2"),n.e("chunk-49e697cc")]).then(n.bind(null,"c8b2"))}},{path:"/:pathMatch(.*)*",redirect:"/"}]});a.beforeEach((function(e,t){if("/login"!=t.path&&"/login"!=e.path){var n=new XMLHttpRequest,o=!1;n.onreadystatechange=function(){4===n.readyState&&200===n.status&&(o=JSON.parse(n.response).alreadyLogin)},n.open("post","/api/alreadyLogin",!1),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify({email:localStorage.getItem("email"),loginCodeName:localStorage.getItem("loginCodeName")})),o||a.push("/login")}})),t["a"]=a},d76e:function(e,t,n){"use strict";n("ee2b")},ee2b:function(e,t,n){}});
//# sourceMappingURL=app.74f95e50.js.map