{"version":3,"sources":["webpack:///./src/views/set/settingClass.vue","webpack:///./src/views/set/settingClass.vue?3938","webpack:///./src/scss/set/settingClass.scss?ffc9"],"names":["class","back","showIncome","toggleIncome","style","$store","state","classList","cost","length","listItemHeight","item","index","key","ref","deleteClass","_id","iconColor","iconImg","className","moveToTop","income","to","deleteTarget","warn","cancelDelete","confirmDelete","name","components","cssIcon_arrowLeft","data","type","id","order","dragClass","mouseDown","start","moveTo","mounted","this","$refs","li0","clientHeight","methods","isIncome","directionIsTop","itemIndex","commit","itemType","itemId","filter","_this","xhr","XMLHttpRequest","onreadystatechange","readyState","status","JSON","parse","response","isSuccess","open","setRequestHeader","send","stringify","email","localStorage","getItem","loginCodeName","classId","router","go","render","__scopeId"],"mappings":"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","file":"js/chunk-49e697cc.c5eb2155.js","sourcesContent":["<template>\r\n  <div class=\"settingClass\">\r\n    <header>\r\n      <div class=\"container\">\r\n        <div class=\"left\" v-clickStyle @click=\"back\">\r\n          <cssIcon_arrowLeft></cssIcon_arrowLeft>\r\n        </div>\r\n        <div class=\"center\">\r\n          類別設置\r\n        </div>\r\n      </div>\r\n    </header>\r\n    <main :class=\"{'showIncome': showIncome}\">\r\n      <div class=\"container\">\r\n        <div class=\"tabs\">\r\n          <div @click=\"toggleIncome(false)\">支出</div>\r\n          <div @click=\"toggleIncome(true)\">收入</div>\r\n        </div>\r\n        <div class=\"listbox\">\r\n          <div>\r\n            <div class=\"olbox\">\r\n              <ol :style=\"{'height': $store.state.classList.cost.length * listItemHeight + 'px'}\">\r\n                <li v-for=\"(item, index) in $store.state.classList.cost\" :key=\"index\" :ref=\"`li${index}`\" \r\n                    :style=\"{'top': listItemHeight * index + 'px'}\">\r\n                  <div class=\"delete\" @click=\"deleteClass('cost', item._id)\"></div>\r\n                  <div class=\"icon\" :class=\"['color_' + item.iconColor, 'icon_' + item.iconImg]\"></div>\r\n                  <div class=\"className\">{{ item.className }}</div>\r\n                  <div class=\"move\">\r\n                    <span @click=\"moveToTop(false, true, index)\"></span>\r\n                    <span @click=\"moveToTop(false, false, index)\"></span>\r\n                  </div>\r\n                </li>\r\n              </ol>\r\n            </div>\r\n            <div class=\"olbox\">\r\n              <ol :style=\"{'height': $store.state.classList.income.length * listItemHeight + 'px'}\">\r\n                <li v-for=\"(item, index) in $store.state.classList.income\" :key=\"index\"\r\n                    :style=\"{'top': listItemHeight * index + 'px'}\">\r\n                  <div class=\"delete\" @click=\"deleteClass('income', item._id)\"></div>\r\n                  <div class=\"icon\" :class=\"['color_' + item.iconColor, 'icon_' + item.iconImg]\"></div>\r\n                  <div class=\"className\">{{ item.className }}</div>\r\n                  <div class=\"move\">\r\n                    <span @click=\"moveToTop(true, true, index)\"></span>\r\n                    <span @click=\"moveToTop(true, false, index)\"></span>\r\n                  </div>\r\n                </li>\r\n              </ol>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <router-link to=\"addClass\">+添加新類別</router-link>\r\n      </div>\r\n    </main>\r\n    <div class=\"fixbox\" :class=\"{'open': deleteTarget.warn}\">\r\n      <div class=\"lightbox\">\r\n        <h2>警告</h2>\r\n        <p>刪除此類別也會將此類別中的所有紀錄一併刪除</p>\r\n        <div>\r\n          <span @click=\"cancelDelete\">取消</span>\r\n          <span @click=\"confirmDelete\">確定</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport router from '@/router'\r\nimport cssIcon_arrowLeft from '@/components/public/cssIcon_arrowLeft.vue'\r\n\r\nexport default {\r\n  name: 'settingClass',\r\n  components: {\r\n    cssIcon_arrowLeft\r\n  },\r\n  data() {\r\n    return {\r\n      showIncome: false,\r\n      listItemHeight: null,\r\n      deleteTarget: {\r\n        type: '',\r\n        id: '',\r\n        order: -1,\r\n        warn: false,\r\n      },\r\n      dragClass: {\r\n        mouseDown: false,\r\n        start: 0,\r\n        moveTo: 0\r\n      }\r\n    }\r\n  },\r\n  mounted(){\r\n    this.listItemHeight = this.$refs.li0 ? this.$refs.li0.clientHeight : 0;\r\n  },\r\n  methods: {\r\n    moveToTop(isIncome, directionIsTop, itemIndex){\r\n      this.$store.commit('resetClassOrder', {isIncome, directionIsTop, itemIndex});\r\n    },\r\n    toggleIncome(showIncome){\r\n      this.showIncome = showIncome;\r\n    },\r\n    deleteClass(itemType, itemId){\r\n      let order = this.$store.state.classList[itemType].filter(function(item){\r\n        return item._id == itemId;\r\n      })[0].order;\r\n      this.deleteTarget = {\r\n        type: itemType,\r\n        id: itemId,\r\n        order: order,\r\n        warn: true,\r\n      }\r\n    },\r\n    confirmDelete(){\r\n      let _this = this;\r\n      let xhr = new XMLHttpRequest();\r\n      xhr.onreadystatechange = function(){\r\n        if(xhr.readyState === 4 && xhr.status === 200){\r\n          if(JSON.parse(xhr.response).isSuccess){\r\n            _this.$store.commit('reloadClass');\r\n            _this.deleteTarget.warn = false;\r\n          }\r\n        }\r\n      };\r\n      xhr.open('post', '/api/deleteClass', false);\r\n      xhr.setRequestHeader('Content-type', 'application/json');\r\n      xhr.send(JSON.stringify({\r\n        email: localStorage.getItem('email'),\r\n        loginCodeName: localStorage.getItem('loginCodeName'),\r\n        classId: this.deleteTarget.id,\r\n        isIncome: this.deleteTarget.type == 'income' ? true : false,\r\n        order: this. deleteTarget.order,\r\n      }));\r\n    },\r\n    cancelDelete(){\r\n      this.deleteTarget.warn = false;\r\n    },\r\n    back(){\r\n      router.go(-1);\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style scoped lang=\"scss\" src=\"@/scss/set/settingClass.scss\"></style>","import { render } from \"./settingClass.vue?vue&type=template&id=42632586&scoped=true\"\nimport script from \"./settingClass.vue?vue&type=script&lang=js\"\nexport * from \"./settingClass.vue?vue&type=script&lang=js\"\n\nimport \"@/scss/set/settingClass.scss?vue&type=style&index=0&id=42632586&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-42632586\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./settingClass.scss?vue&type=style&index=0&id=42632586&scoped=true&lang=scss\""],"sourceRoot":""}