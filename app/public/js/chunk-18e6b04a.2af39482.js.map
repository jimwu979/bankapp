{"version":3,"sources":["webpack:///./src/scss/find/statistics.scss?6182","webpack:///./src/views/find/statistics.vue","webpack:///./src/views/find/statistics.vue?7a6c"],"names":["class","back","init","isIncome","statisticsList","item","index","key","to","color","icon","className","calculatePercentage","number","style","name","components","monthlyCalendar","cssIcon_arrowLeft","data","classList","recordList","created","this","computed","totalCost","forEach","_this","costPercentage","percentage","Math","round","push","methods","routeQuery","$route","query","JSON","parse","storeClassList","$store","state","income","concat","cost","filter","typeIsIncome","sum","recordItem","classId","_id","value","iconImg","iconColor","sort","a","b","router","go","render"],"mappings":"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","file":"js/chunk-18e6b04a.2af39482.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./statistics.scss?vue&type=style&index=0&lang=scss\"","<template>\r\n  <div class=\"statistics\">\r\n    <header>\r\n      <div class=\"container\">\r\n        <div class=\"left\" v-clickStyle @click=\"back\">\r\n          <cssIcon_arrowLeft></cssIcon_arrowLeft>\r\n        </div>\r\n        <div class=\"center\">\r\n          <monthlyCalendar @selectOtherMonth=\"init\"></monthlyCalendar>\r\n        </div>\r\n      </div>\r\n    </header>\r\n    <main>\r\n      <div class=\"container\">\r\n        <div class=\"board\">\r\n          <h2>{{ isIncome ? '收入':'支出' }}列表</h2>\r\n          <div class=\"list\">\r\n            <router-link \r\n              v-for=\"(item, index) in statisticsList\"\r\n              :key=\"index\"\r\n              v-clickStyle\r\n              :to=\"{\r\n                path: 'classDetail', \r\n                query: { \r\n                  isIncome: isIncome, \r\n                  classId: item.classId,\r\n                  className: item.className,\r\n                  iconImg: item.icon,\r\n                  iconColor: item.color\r\n                }\r\n              }\">\r\n              <div :class=\"['icon', 'color_' + item.color, 'icon_' + item.icon]\"></div>\r\n              <div class=\"information\">\r\n                <div class=\"text\">\r\n                  <div class=\"class\">{{ item.className }}<span>{{ calculatePercentage[index] }}%</span></div>\r\n                  <div class=\"number\">{{ item.number }}</div>\r\n                </div>\r\n                <hr class=\"lineChart\" :style=\"{width: calculatePercentage[index] + '%'}\">\r\n              </div>\r\n            </router-link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport monthlyCalendar from '@/components/find/monthlyCalendar.vue'\r\nimport cssIcon_arrowLeft from '@/components/public/cssIcon_arrowLeft.vue';\r\nimport router from '@/router'\r\n\r\nexport default {\r\n  name: 'statistics',\r\n  components: {\r\n    monthlyCalendar, cssIcon_arrowLeft\r\n  },\r\n  data() {\r\n    return {\r\n      classList: [],\r\n      recordList: [],\r\n      statisticsList: [\r\n        // { id: 'zxc123', class: '正餐', icon: 0, color: 0, number: 2000 },\r\n      ],\r\n      isIncome: false,\r\n    }\r\n  },\r\n  created(){\r\n    this.init();\r\n  },\r\n  computed: {\r\n    totalCost(){\r\n      let totalCost = 0;\r\n      this.statisticsList.forEach(item => {\r\n        totalCost += item.number;\r\n      });\r\n      return totalCost;\r\n    },\r\n    calculatePercentage(){\r\n      let _this = this;\r\n      let costPercentage = [];\r\n      this.statisticsList.forEach(item => {\r\n        let percentage = _this.totalCost !== 0 ? (item.number / _this.totalCost) * 100 : 0;\r\n        percentage = Math.round(percentage);\r\n        costPercentage.push(percentage);\r\n      });\r\n      return costPercentage;\r\n    },\r\n  },\r\n  methods: {\r\n    init(){\r\n      let routeQuery = this.$route.query;\r\n      if(routeQuery.isIncome) this.isIncome = JSON.parse(routeQuery.isIncome);\r\n      let _this = this;\r\n      let storeClassList = this.$store.state.classList;\r\n      this.classList = storeClassList.income.concat(storeClassList.cost).filter(item => {\r\n        return item.typeIsIncome == _this.isIncome;\r\n      });\r\n      this.recordList = this.$store.state.recordList.filter(item => {\r\n        return item.typeIsIncome == _this.isIncome;\r\n      });\r\n      this.statisticsList = [];\r\n      this.classList.forEach(item => {\r\n        let sum = 0;\r\n        _this.recordList.forEach(recordItem => {\r\n          if(recordItem.classId == item._id) sum += recordItem.value;\r\n        })\r\n        _this.statisticsList.push({\r\n          classId: item._id,\r\n          className: item.className,\r\n          icon: item.iconImg,\r\n          color: item.iconColor,\r\n          number: sum,\r\n        });\r\n      });\r\n      _this.statisticsList.sort((a, b) => {\r\n        return b.number - a.number;\r\n      });\r\n    },\r\n    back(){\r\n      router.go(-1);\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style lang=\"scss\" src=\"@/scss/find/statistics.scss\"></style>","import { render } from \"./statistics.vue?vue&type=template&id=23be95af\"\nimport script from \"./statistics.vue?vue&type=script&lang=js\"\nexport * from \"./statistics.vue?vue&type=script&lang=js\"\n\nimport \"@/scss/find/statistics.scss?vue&type=style&index=0&lang=scss\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}