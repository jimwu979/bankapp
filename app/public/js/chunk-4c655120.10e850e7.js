(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c655120"],{"8bd5":function(e,t,s){"use strict";s.r(t);s("b0c0");var o=s("7a23");Object(o["w"])("data-v-69c0f242");var a={class:"account"},i={class:"container"},l=Object(o["g"])("div",{class:"center"}," 帳號設定 ",-1),n={class:"right"},r=Object(o["h"])("登出"),c={class:"container"},g={class:"board"},b={class:"photo"},d={for:"uploadImage"},u=Object(o["g"])("div",null,"姓名",-1),h=Object(o["g"])("div",null,"信箱",-1),p={class:"lightbox"},O=Object(o["g"])("p",{class:"show"},"檔案大小不可大於10MB",-1),m={class:"btns"},w=Object(o["g"])("h2",null,"輸入姓名",-1),j={class:"btns"},v=Object(o["g"])("h2",null,"輸入email",-1),f={class:"btns"},x=Object(o["g"])("h2",null,"輸入密碼",-1),P=Object(o["g"])("div",null,"舊密碼",-1),k=Object(o["g"])("div",null,"新密碼",-1),E=Object(o["g"])("div",null,"確認新密碼",-1),N={class:"btns"};function y(e,t,s,y,C,M){var I=Object(o["A"])("cssIcon_arrowLeft"),L=Object(o["A"])("router-link"),S=Object(o["A"])("cssIcon_edit"),R=Object(o["B"])("clickStyle");return Object(o["t"])(),Object(o["f"])("div",a,[Object(o["g"])("header",null,[Object(o["g"])("div",i,[Object(o["K"])(Object(o["g"])("div",{class:"left",onClick:t[0]||(t[0]=function(){return M.back&&M.back.apply(M,arguments)})},[Object(o["i"])(I)],512),[[R]]),l,Object(o["K"])(Object(o["g"])("div",n,[Object(o["i"])(L,{to:"login",onClickCapture:M.logout},{default:Object(o["J"])((function(){return[r]})),_:1},8,["onClickCapture"])],512),[[R]])])]),Object(o["g"])("main",null,[Object(o["g"])("div",c,[Object(o["g"])("div",g,[Object(o["g"])("div",b,[Object(o["g"])("div",{style:Object(o["p"])({"background-image":"url("+C.img.val+")"})},[Object(o["g"])("input",{id:"uploadImage",type:"file",name:"file",onChange:t[1]||(t[1]=function(){return M.uploadImg&&M.uploadImg.apply(M,arguments)})},null,32),Object(o["g"])("label",d,[Object(o["g"])("div",null,[Object(o["i"])(S)])])],4)]),Object(o["g"])("ol",null,[Object(o["g"])("li",null,[u,Object(o["g"])("div",{onClick:t[2]||(t[2]=function(e){return M.openLightbox("name")})},Object(o["D"])(C.name),1)]),Object(o["g"])("li",null,[h,Object(o["g"])("div",{onClick:t[3]||(t[3]=function(e){return M.openLightbox("email")})},Object(o["D"])(C.email),1)])]),Object(o["g"])("div",{onClick:t[4]||(t[4]=function(e){return M.openLightbox("password")})},"修改密碼")])])]),Object(o["g"])("div",{class:Object(o["o"])(["fixbox",{open:C.lightbox.isOpen}])},[Object(o["g"])("div",p,[Object(o["g"])("div",{class:Object(o["o"])(["resetImg",{open:C.lightbox.resetImg.isOpen}])},[O,Object(o["g"])("div",m,[Object(o["g"])("div",{onClick:t[5]||(t[5]=function(){return M.closeLightbox&&M.closeLightbox.apply(M,arguments)})},"確定")])],2),Object(o["g"])("div",{class:Object(o["o"])(["resetName",{open:C.lightbox.resetName.isOpen}])},[w,Object(o["K"])(Object(o["g"])("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=function(e){return C.lightbox.resetName.val=e})},null,512),[[o["G"],C.lightbox.resetName.val]]),Object(o["g"])("p",{class:Object(o["o"])({show:C.lightbox.resetName.showErrorMessage})},"欄位不可空白",2),Object(o["g"])("div",j,[Object(o["g"])("div",{onClick:t[7]||(t[7]=function(){return M.closeLightbox&&M.closeLightbox.apply(M,arguments)})},"取消"),Object(o["g"])("div",{onClick:t[8]||(t[8]=function(e){return M.confirmReset("name")})},"確定")])],2),Object(o["g"])("div",{class:Object(o["o"])(["resetEmail",{open:C.lightbox.resetEmail.isOpen}])},[v,Object(o["K"])(Object(o["g"])("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=function(e){return C.lightbox.resetEmail.val=e})},null,512),[[o["G"],C.lightbox.resetEmail.val]]),Object(o["g"])("p",{class:Object(o["o"])({show:C.lightbox.resetEmail.showErrorMessage})},"欄位不可空白",2),Object(o["g"])("div",f,[Object(o["g"])("div",{onClick:t[10]||(t[10]=function(){return M.closeLightbox&&M.closeLightbox.apply(M,arguments)})},"取消"),Object(o["g"])("div",{onClick:t[11]||(t[11]=function(e){return M.confirmReset("email")})},"確定")])],2),Object(o["g"])("div",{class:Object(o["o"])(["resetPassword",{open:C.lightbox.resetPassword.isOpen}])},[x,Object(o["g"])("ol",null,[Object(o["g"])("li",null,[P,Object(o["K"])(Object(o["g"])("input",{type:"password","onUpdate:modelValue":t[12]||(t[12]=function(e){return C.lightbox.resetPassword.originalPassword.val=e})},null,512),[[o["G"],C.lightbox.resetPassword.originalPassword.val]]),Object(o["g"])("p",{class:Object(o["o"])({show:C.lightbox.resetPassword.originalPassword.showErrorMessage})},"密碼輸入錯誤",2)]),Object(o["g"])("li",null,[k,Object(o["K"])(Object(o["g"])("input",{type:"password","onUpdate:modelValue":t[13]||(t[13]=function(e){return C.lightbox.resetPassword.newPassword.val=e})},null,512),[[o["G"],C.lightbox.resetPassword.newPassword.val]]),Object(o["g"])("p",{class:Object(o["o"])({show:C.lightbox.resetPassword.newPassword.showErrorMessage})},"欄位不可空白",2)]),Object(o["g"])("li",null,[E,Object(o["K"])(Object(o["g"])("input",{type:"password","onUpdate:modelValue":t[14]||(t[14]=function(e){return C.lightbox.resetPassword.checkNewPassword.val=e})},null,512),[[o["G"],C.lightbox.resetPassword.checkNewPassword.val]]),Object(o["g"])("p",{class:Object(o["o"])({show:C.lightbox.resetPassword.checkNewPassword.showErrorMessage})},"新密碼輸入不一致",2)])]),Object(o["g"])("div",N,[Object(o["g"])("div",{onClick:t[15]||(t[15]=function(){return M.closeLightbox&&M.closeLightbox.apply(M,arguments)})},"取消"),Object(o["g"])("div",{onClick:t[16]||(t[16]=function(e){return M.confirmReset("password")})},"確定")])],2)])],2)])}Object(o["u"])();var C=s("a18c"),M=s("f1b8"),I=s("3ace"),L={name:"account",components:{cssIcon_arrowLeft:M["a"],cssIcon_edit:I["a"]},data:function(){return{img:{val:null},preview:null,image:null,name:"",email:"",lightbox:{isOpen:!1,resetImg:{isOpen:!1},resetName:{isOpen:!1,val:"",showErrorMessage:!1},resetEmail:{isOpen:!1,val:"",showErrorMessage:!1},resetPassword:{isOpen:!1,originalPassword:{val:"",showErrorMessage:!1},newPassword:{val:"",showErrorMessage:!1},checkNewPassword:{val:"",showErrorMessage:!1}}}}},created:function(){var e=this,t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var s=JSON.parse(t.response);e.name=s.name,e.email=s.email,s.photo.length>0&&(e.img.val="/photo/"+s.photo)}},t.open("post","/api/getAccount",!1),t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify({email:localStorage.getItem("email"),loginCodeName:localStorage.getItem("loginCodeName")}))},methods:{uploadImg:function(){var e=this,t=event.target;if(t.files){var s=Math.round(t.files[0].size/1024/1024);if(s>10)this.openLightbox("img");else{var o=new FileReader;o.onload=function(t){e.img.val=t.target.result},this.image=t.files[0],o.readAsDataURL(t.files[0]);var a=new FormData,i=document.getElementById("uploadImage");a.append("email",localStorage.getItem("email")),a.append("loginCodeName",localStorage.getItem("loginCodeName")),a.append("file",i.files[0]);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(4===l.readyState&&200===l.status){var e=JSON.parse(l.response);console.log(e)}},l.open("post","/album/upload",!1),l.send(a)}}},confirmReset:function(e){switch(e){case"name":var t=this.lightbox.resetName;t.val.length>0?(this.name=t.val,this.closeLightbox(),t.showErrorMessage=!1):t.showErrorMessage=!0;break;case"email":var s=this.lightbox.resetEmail;s.val.length>0?(this.email=s.val,this.closeLightbox(),s.showErrorMessage=!1):s.showErrorMessage=!0;break;case"password":var o=this.lightbox.resetPassword,a=o.originalPassword,i=o.newPassword,l=o.checkNewPassword;if(a.showErrorMessage=0==a.val.length,i.showErrorMessage=0==i.val.length,l.showErrorMessage=i.val!==l.val,!a.showErrorMessage&&!i.showErrorMessage&&!l.showErrorMessage){var n=this,r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&200===r.status&&(JSON.parse(r.response).isSuccess?(a.showErrorMessage=!1,n.closeLightbox()):a.showErrorMessage=!0)},r.open("post","/api/resetPassword",!1),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify({email:localStorage.getItem("email"),loginCodeName:localStorage.getItem("loginCodeName"),oldPassword:a.val,newPassword:i.val}))}break}},openLightbox:function(e){switch(this.lightbox.isOpen=!0,e){case"img":this.lightbox.resetImg.isOpen=!0;break;case"name":this.lightbox.resetName.val=this.name,this.lightbox.resetName.isOpen=!0;break;case"email":this.lightbox.resetEmail.val=this.email,this.lightbox.resetEmail.isOpen=!0;break;case"password":var t=this.lightbox.resetPassword;t.originalPassword.val="",t.newPassword.val="",t.checkNewPassword.val="",t.isOpen=!0;break}},closeLightbox:function(){var e=this.lightbox;e.isOpen=!1,setTimeout((function(){e.resetImg.isOpen=!1,e.resetName.isOpen=!1,e.resetEmail.isOpen=!1,e.resetPassword.isOpen=!1}),300,e)},logout:function(){var e,t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&200===t.status&&(e=JSON.parse(t.response).isSuccess)},t.open("post","/api/logout",!1),t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify({email:localStorage.getItem("email"),loginCodeName:localStorage.getItem("loginCodeName")})),e&&(localStorage.removeItem("loginCodeName"),localStorage.removeItem("email"))},back:function(){C["a"].go(-1)}}};s("f158");L.render=y,L.__scopeId="data-v-69c0f242";t["default"]=L},f158:function(e,t,s){"use strict";s("f5f7")},f5f7:function(e,t,s){}}]);
//# sourceMappingURL=chunk-4c655120.10e850e7.js.map