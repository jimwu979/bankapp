{"version":3,"sources":["webpack:///./src/scss/find/index.scss?0590","webpack:///./src/scss/public/cssIcon_hamburger.scss?4196","webpack:///./src/scss/public/cssIcon_add.scss?3531","webpack:///./src/views/find/index.vue","webpack:///./src/components/public/cssIcon_hamburger.vue","webpack:///./src/components/public/cssIcon_hamburger.vue?5d7c","webpack:///./src/components/public/cssIcon_add.vue","webpack:///./src/components/public/cssIcon_add.vue?e3a3","webpack:///./src/views/find/index.vue?a42e"],"names":["class","openNav","switchMonth","parentYear","selectYear","parentMonth","selectMonth","to","total","income","cost","balance","costList","day","day_index","key","dayOfTheWeek","dailyCost","item","i_index","_id","iconColor","iconImg","className","description","value","length","name","render","__scopeId","components","monthlyCalendar","cssIcon_hamburger","cssIcon_add","data","classList","CalendarIsOpen","clickItemsIndex","beforeMount","this","undefined","$route","query","year","Number","Date","getFullYear","month","getMonth","init","computed","dayLength","d","costItemsLength","n","costItems","typeIsIncome","Math","abs","i","costTotal","forEach","element","push","numberOfDays","getDate","getDay","methods","$emit","newTime","_this","xhr","XMLHttpRequest","onreadystatechange","readyState","status","res","JSON","parse","response","record","classItem","filter","_class","classId","open","setRequestHeader","send","stringify","email","localStorage","getItem","loginCodeName"],"mappings":"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","file":"js/chunk-bfcd6fba.8389f6e3.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./index.scss?vue&type=style&index=0&id=955d7f66&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./cssIcon_hamburger.scss?vue&type=style&index=0&id=4447d5a9&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./cssIcon_add.scss?vue&type=style&index=0&id=3be588c1&scoped=true&lang=scss\"","<template>\r\n  <div class=\"index\">\r\n    <header>\r\n      <div class=\"container\">\r\n        <div class=\"left\" v-clickStyle @click=\"openNav\">\r\n          <cssIcon_hamburger></cssIcon_hamburger>\r\n        </div>\r\n        <div class=\"center\">\r\n          <monthlyCalendar @selectOtherMonth=\"switchMonth\" :parentYear=\"selectYear\" :parentMonth=\"selectMonth\"></monthlyCalendar>\r\n        </div>\r\n      </div>\r\n    </header>\r\n    <main>\r\n      <div class=\"container\">\r\n        <div class=\"total board\">\r\n          <router-link class=\"totalType\"\r\n            :to=\"{ path: '/statistics', query: { year: selectYear, month: selectMonth, isIncome: true}}\">\r\n            <span>收入</span>\r\n            <span>{{ total.income }}</span>\r\n          </router-link>\r\n          <router-link class=\"totalType\"\r\n            :to=\"{ path: '/statistics', query: { year: selectYear, month: selectMonth, isIncome: false}}\">\r\n            <span>支出</span>\r\n            <span>{{ total.cost }}</span>\r\n          </router-link>\r\n          <div class=\"totalType\">\r\n            <span>結餘</span>\r\n            <span>{{ total.balance }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"day board\" v-for=\"(day, day_index) in costList\" v-show=\"day.length > 0\" :key=\"day_index\">\r\n          <div class=\"title\">\r\n            <div>{{selectMonth}}/{{ day_index + 1 }} 週{{ dayOfTheWeek[day_index] }}</div>\r\n            <div>收支: <span>{{dailyCost[day_index]}}</span></div>\r\n          </div>\r\n          <div class=\"cost_list\">\r\n            <router-link class=\"cost_item\" v-clickStyle\r\n              v-for=\"(item, i_index) in costList[day_index]\"\r\n              :key=\"i_index\"\r\n              :to=\"{ path: 'recordDetail', query: { id: item._id}}\"\r\n            >\r\n              <div :class=\"['icon', 'color_' + item.iconColor, 'icon_' + item.iconImg]\"></div>\r\n              <div class=\"class\">{{item.className}}<span>{{item.description}}</span></div>\r\n              <div class=\"number\">{{item.value}}</div>\r\n            </router-link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n    <router-link class=\"add_record\" to=\"/addRecord\">\r\n      <cssIcon_add></cssIcon_add>\r\n    </router-link>\r\n  </div>\r\n</template>\r\n<script>\r\nimport monthlyCalendar from '@/components/find/monthlyCalendar.vue'\r\nimport cssIcon_hamburger from '@/components/public/cssIcon_hamburger.vue'\r\nimport cssIcon_add from '@/components/public/cssIcon_add.vue'\r\nimport moment from 'moment'\r\nimport router from '@/router'\r\nexport default {\r\n  name: 'index',\r\n  components: {\r\n    monthlyCalendar, cssIcon_hamburger, cssIcon_add\r\n  },\r\n  data() {\r\n    return {\r\n      classList: [\r\n        // {_id: '', className: '', iconImg: 0, iconColor: 0, typeIsIncome: false},\r\n      ],\r\n      costList: [\r\n        // { \r\n        //   classId: 'abcd1234', \r\n        //   className: '生活費', \r\n        //   iconImg: 2, \r\n        //   iconColor: 6, \r\n        //   typeIsIncome: true, \r\n        //   description: '', \r\n        //   value: 20000, \r\n        //   year: 2021,\r\n        //   month: 9,\r\n        //   day: 2 \r\n        // },\r\n      ],\r\n      selectYear: 2021,\r\n      selectMonth: 9,\r\n      CalendarIsOpen: false,\r\n      clickItemsIndex: [null, null],\r\n    }\r\n  },\r\n  beforeMount(){\r\n    this.selectYear = (this.$route.query.year !== undefined) ? Number(this.$route.query.year) : new Date().getFullYear();\r\n    this.selectMonth = (this.$route.query.month !== undefined) ? Number(this.$route.query.month) : new Date().getMonth() + 1;\r\n    this.init();\r\n  },\r\n  computed: {\r\n    total(){\r\n      let dayLength = this.costList.length;\r\n      let income = 0;\r\n      let cost = 0;\r\n      for(let d = 0; d < dayLength; d++){\r\n        let costItemsLength = this.costList[d].length;\r\n        for(let n = 0; n < costItemsLength; n++){\r\n          let costItems = this.costList[d][n];\r\n          if(costItems.typeIsIncome){\r\n            income += costItems.value;\r\n          } else {\r\n            cost += costItems.value;\r\n          }\r\n        }\r\n      }\r\n      cost = Math.abs(cost);\r\n      let balance = income - cost;\r\n      return {income, cost, balance}\r\n    },\r\n    dailyCost(){\r\n      const dayLength = this.costList.length;\r\n      let dailyCost = [];\r\n      for(let i = 0; i < dayLength; i++){\r\n        let costTotal = 0;\r\n        this.costList[i].forEach(element => {\r\n          costTotal += element.value;\r\n        });\r\n        dailyCost.push(costTotal);\r\n      }\r\n      return dailyCost;\r\n    },\r\n    dayOfTheWeek(){\r\n      let year = this.selectYear;\r\n      let month = this.selectMonth;\r\n      let numberOfDays = new Date(year, month, 0).getDate();\r\n      let dayOfTheWeek = [];\r\n      for(let d=1; d<=numberOfDays; d++){\r\n        let day = new Date(year + '/'+ month +'/' + d).getDay();\r\n        dayOfTheWeek.push(['日', '一', '二', '三', '四', '五', '六'][day]);\r\n      }\r\n      return dayOfTheWeek;\r\n    }\r\n  },\r\n  methods: {\r\n    openNav(){\r\n      this.$emit('openNav');\r\n    },\r\n    switchMonth(newTime){\r\n      this.selectYear = newTime.selectYear;\r\n      this.selectMonth = newTime.selectMonth;\r\n      this.init();\r\n    },\r\n    init(){\r\n      // 初始化 天數\r\n      this.costList = [];\r\n      let numberOfDays = new Date(this.selectYear, this.selectMonth, 0).getDate();\r\n      for(let d = 0; d < numberOfDays; d++){\r\n        this.costList.push([]);\r\n      }\r\n\r\n      // 載入帳目資料\r\n      let _this = this;\r\n      let xhr = new XMLHttpRequest();\r\n      xhr.onreadystatechange = function(){\r\n        if(xhr.readyState === 4 && xhr.status === 200){\r\n          let res = JSON.parse(xhr.response);\r\n          _this.classList = res.classList;\r\n          res.record.forEach(function(item){\r\n            let classItem = _this.classList.filter(function(_class){\r\n              return _class._id == item.classId;\r\n            });\r\n            item.iconColor = classItem[0].iconColor;\r\n            item.iconImg = classItem[0].iconImg;\r\n            item.className = classItem[0].className;\r\n            item.value = (item.typeIsIncome) ? item.value : item.value * -1;\r\n            _this.costList[item.day - 1].push(item);\r\n          });\r\n        }\r\n      };\r\n      xhr.open('post', '/api/readRecord_aMonth', false);\r\n      xhr.setRequestHeader('Content-type', 'application/json');\r\n      xhr.send(JSON.stringify({\r\n        email: localStorage.getItem('email'),\r\n        loginCodeName: localStorage.getItem('loginCodeName'),\r\n        year: this.selectYear,\r\n        month: this.selectMonth,\r\n      }));\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style scoped lang=\"scss\" src=\"@/scss/find/index.scss\"></style>","<template>\r\n  <div class=\"cssIcon cssIcon_hamburger\">\r\n    <hr>\r\n    <hr>\r\n    <hr>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'cssIcon_hamburger'\r\n}\r\n</script>\r\n<style scoped lang=\"scss\" src=\"@/scss/public/cssIcon_hamburger.scss\"></style>","import { render } from \"./cssIcon_hamburger.vue?vue&type=template&id=4447d5a9&scoped=true\"\nimport script from \"./cssIcon_hamburger.vue?vue&type=script&lang=js\"\nexport * from \"./cssIcon_hamburger.vue?vue&type=script&lang=js\"\n\nimport \"@/scss/public/cssIcon_hamburger.scss?vue&type=style&index=0&id=4447d5a9&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-4447d5a9\"\n\nexport default script","<template>\r\n  <div class=\"cssIcon cssIcon_add\">\r\n      \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'cssIcon_add'\r\n}\r\n</script>\r\n<style scoped lang=\"scss\" src=\"@/scss/public/cssIcon_add.scss\"></style>","import { render } from \"./cssIcon_add.vue?vue&type=template&id=3be588c1&scoped=true\"\nimport script from \"./cssIcon_add.vue?vue&type=script&lang=js\"\nexport * from \"./cssIcon_add.vue?vue&type=script&lang=js\"\n\nimport \"@/scss/public/cssIcon_add.scss?vue&type=style&index=0&id=3be588c1&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-3be588c1\"\n\nexport default script","import { render } from \"./index.vue?vue&type=template&id=955d7f66&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"@/scss/find/index.scss?vue&type=style&index=0&id=955d7f66&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-955d7f66\"\n\nexport default script"],"sourceRoot":""}