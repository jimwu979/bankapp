{"version":3,"sources":["webpack:///./src/views/set/login.vue","webpack:///./src/views/set/login.vue?779c","webpack:///./src/scss/set/login.scss?7e91","webpack:///./src/assets/logo.png"],"names":["class","src","isAlreadyLogin","inputmodel","item","index","onFocus","val","length","key","focusInput","type","login","to","errorMessageIsOpen","closeLightbox","name","data","text","beforeCreate","_this","this","xhr","XMLHttpRequest","onreadystatechange","readyState","status","JSON","parse","response","alreadyLogin","open","setRequestHeader","send","stringify","email","localStorage","getItem","loginCodeName","router","push","methods","targetInput","res","isSuccess","setItem","$emit","password","render","__scopeId","module","exports"],"mappings":"sOACOA,MAAM,S,EACT,eAEM,OAFDA,MAAM,QAAM,CACf,eAA6B,OAAxBC,IAAA,Q,wEAYiC,Q,GAEjCD,MAAM,Y,iBAAW,kB,mEAhBA,EAAAE,e,wCAA1B,eAqBM,MArBN,EAqBM,CApBJ,G,mBAGA,eAQM,2BAPuB,EAAAC,YAAU,SAA1BC,EAAMC,G,wBADnB,eAQM,OARDL,MAAK,gBAAC,QAAO,QAEM,EAAAG,WAAWE,GAAOC,SAAO,MAAY,EAAAH,WAAWE,GAAOE,IAAIC,OAAM,MAD/CC,IAAKJ,G,CAE7C,eAA4C,2BAAnC,EAAAF,WAAWE,GAAK,Y,eACzB,eAGyC,SAHjC,OAAI,mBAAE,EAAAK,WAAWL,GAAK,IACtB,QAAK,mBAAE,EAAAK,WAAWL,GAAK,I,yCACf,EAAAF,WAAWE,GAAOE,IAAG,GAC7BI,KAAM,EAAAR,WAAWE,GAAK,S,oBADd,EAAAF,WAAWE,GAAOE,Q,YAGpC,eAA6C,OAAxCP,MAAM,WAAY,QAAK,8BAAE,EAAAY,OAAA,EAAAA,MAAA,sBAAO,MACrC,eAA0D,GAA7CZ,MAAM,SAASa,GAAG,U,yBAAS,iBAAI,C,YAC5C,eAKM,OALDb,MAAK,gBAAC,SAAQ,MAAkB,EAAAc,uB,CACnC,eAGM,MAHN,EAGM,C,EADJ,eAAoC,OAA9B,QAAK,8BAAE,EAAAC,eAAA,EAAAA,cAAA,sBAAe,S,uCASrB,GACbC,KAAM,QACNC,KAFa,WAGX,MAAO,CACLf,gBAAgB,EAChBC,WAAY,CACV,CACEe,KAAM,QACNP,KAAM,UACNJ,IAAK,GACLD,SAAS,GAEX,CACEY,KAAM,KACNP,KAAM,WACNJ,IAAK,GACLD,SAAS,IAGbQ,oBAAoB,IAGxBK,aAtBa,WAuBX,IAAIC,EAAQC,KACRC,EAAM,IAAIC,eACdD,EAAIE,mBAAqB,WACC,IAAnBF,EAAIG,YAAmC,MAAfH,EAAII,SAC3BN,EAAMlB,eAAiByB,KAAKC,MAAMN,EAAIO,UAAUC,eAGxDR,EAAIS,KAAK,OAAQ,qBAAqB,GACtCT,EAAIU,iBAAiB,eAAe,oBACpCV,EAAIW,KAAKN,KAAKO,UAAU,CACpBC,MAAOC,aAAaC,QAAQ,SAC5BC,cAAeF,aAAaC,QAAQ,oBAErChB,KAAKnB,gBAAgBqC,EAAA,KAAOC,KAAK,MAEtCC,QAAS,CACP/B,WADO,SACIgC,EAAahB,GACtBL,KAAKlB,WAAWuC,GAAapC,QAAUoB,GAEzCX,cAJO,WAKLM,KAAKP,oBAAqB,GAE5BF,MAPO,WAQL,IAAIQ,EAAQC,KACRC,EAAM,IAAIC,eACdD,EAAIS,KAAK,OAAQ,cAAc,GAC/BT,EAAIU,iBAAiB,eAAgB,oBACrCV,EAAIE,mBAAqB,WACvB,GAAsB,IAAnBF,EAAIG,YAAmC,MAAfH,EAAII,OAAe,CAC5C,IAAIiB,EAAMhB,KAAKC,MAAMN,EAAIO,UACtBc,EAAIC,WACLR,aAAaS,QAAQ,gBAAiBF,EAAIL,eAC1CF,aAAaS,QAAQ,QAASzB,EAAMjB,WAAW,GAAGI,KAClDa,EAAM0B,MAAM,SACZP,EAAA,KAAOC,KAAK,MAEZpB,EAAMN,oBAAqB,IAIjCQ,EAAIW,KAAKN,KAAKO,UAAU,CACtBC,MAAOd,KAAKlB,WAAW,GAAGI,IAC1BwC,SAAU1B,KAAKlB,WAAW,GAAGI,U,UCxFrC,EAAOyC,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,kCCRf,W,qBCAAC,EAAOC,QAAU,IAA0B","file":"js/chunk-0f4200d9.316fe5cc.js","sourcesContent":["<template>\r\n  <div class=\"login\" v-if=\"!isAlreadyLogin\">\r\n    <div class=\"logo\">\r\n      <img src=\"@/assets/logo.png\">\r\n    </div>\r\n    <div class=\"input\"\r\n         v-for=\"(item, index) in inputmodel\" :key=\"index\" \r\n         :class=\"[{'focus': inputmodel[index].onFocus}, {'fill': inputmodel[index].val.length > 0}]\">\r\n      <span>{{ inputmodel[index]['text'] }}</span>\r\n      <input @blur=\"focusInput(index, false)\" \r\n             @focus=\"focusInput(index, true)\" \r\n             v-model=\"inputmodel[index].val\" \r\n             :type=\"inputmodel[index]['type']\">\r\n    </div>\r\n    <div class=\"loginbtn\" @click=\"login\">登入</div>\r\n    <router-link class=\"signUp\" to=\"signUp\">註冊會員</router-link>\r\n    <div class=\"fixbox\" :class=\"{'open': errorMessageIsOpen}\">\r\n      <div class=\"lightbox\">\r\n        email或密碼輸入錯誤\r\n        <div @click=\"closeLightbox\">確定</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport router from '@/router'\r\n\r\nexport default {\r\n  name: 'login',\r\n  data() {\r\n    return {\r\n      isAlreadyLogin: false,\r\n      inputmodel: [\r\n        {\r\n          text: 'email',\r\n          type: 'account',\r\n          val: '',\r\n          onFocus: false\r\n        },\r\n        {\r\n          text: '密碼',\r\n          type: 'password',\r\n          val: '',\r\n          onFocus: false\r\n        }\r\n      ],\r\n      errorMessageIsOpen: false\r\n    }\r\n  },\r\n  beforeCreate(){\r\n    let _this = this;\r\n    let xhr = new XMLHttpRequest();\r\n    xhr.onreadystatechange = function(){\r\n        if(xhr.readyState === 4 && xhr.status === 200){\r\n            _this.isAlreadyLogin = JSON.parse(xhr.response).alreadyLogin;\r\n        }\r\n    };\r\n    xhr.open('post', '/api/alreadyLogin', false);\r\n    xhr.setRequestHeader(\"Content-type\",\"application/json\");\r\n    xhr.send(JSON.stringify({\r\n        email: localStorage.getItem('email'),\r\n        loginCodeName: localStorage.getItem('loginCodeName'),\r\n    }));\r\n    if(this.isAlreadyLogin) router.push('/');\r\n  },\r\n  methods: {\r\n    focusInput(targetInput, status){\r\n      this.inputmodel[targetInput].onFocus = status;\r\n    },\r\n    closeLightbox(){\r\n      this.errorMessageIsOpen = false;\r\n    },\r\n    login(){\r\n      let _this = this;\r\n      let xhr = new XMLHttpRequest();\r\n      xhr.open('post', '/api/login', false);\r\n      xhr.setRequestHeader('Content-type', 'application/json');\r\n      xhr.onreadystatechange = function(){\r\n        if(xhr.readyState === 4 && xhr.status === 200){\r\n          let res = JSON.parse(xhr.response);\r\n          if(res.isSuccess){\r\n            localStorage.setItem('loginCodeName', res.loginCodeName);\r\n            localStorage.setItem('email', _this.inputmodel[0].val);\r\n            _this.$emit('login');\r\n            router.push('/');\r\n          } else {\r\n            _this.errorMessageIsOpen = true;\r\n          }\r\n        }\r\n      };\r\n      xhr.send(JSON.stringify({\r\n        email: this.inputmodel[0].val,\r\n        password: this.inputmodel[1].val\r\n      }));\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style scoped lang=\"scss\" src=\"@/scss/set/login.scss\"></style>","import { render } from \"./login.vue?vue&type=template&id=9b1a5212&scoped=true\"\nimport script from \"./login.vue?vue&type=script&lang=js\"\nexport * from \"./login.vue?vue&type=script&lang=js\"\n\nimport \"@/scss/set/login.scss?vue&type=style&index=0&id=9b1a5212&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-9b1a5212\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./login.scss?vue&type=style&index=0&id=9b1a5212&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/logo.60f39ac9.png\";"],"sourceRoot":""}